<route lang="json5" type="page">
{
  needLogin: true,
  style: {
    navigationBarTitleText: 'æœåŠ¡ç½‘ç‚¹',
    backgroundColor: '#fff',
    navigationBarBackgroundColor: '#fff',
    navigationBarTextStyle: 'black',
  },
}
</route>

<script lang="ts" setup>
import { routeTo } from '@/utils'
import useCardMessage from './hooks/businessOutlets'

const { cardInfoData } = useCardMessage()

const cardUrl = ref('https://cdn.uviewui.com/uview/demo/upload/positive.png')

const mainData = ref([
  {
    title: 'ç¤¾ä¿æŸ¥è¯¢',
    icon: 'card',
    url: cardUrl,
    lable:
      'å…°å·å¸‚åŸå…³åŒºé«˜æ¬£å¤§å¦å…°å·å¸‚åŸå…³åŒºé«˜æ¬£å¤§å¦å…°å·å¸‚åŸå…³åŒºé«˜æ¬£å¤§å¦å…°å·å¸‚åŸå…³åŒºé«˜æ¬£å¤§å¦å…°å·å¸‚åŸå…³åŒºé«˜æ¬£å¤§å¦å…°å·å¸‚åŸå…³åŒºé«˜æ¬£å¤§å¦',
    longitude: 103.834,
    latitude: 36.0613,
    distance: '120ç±³',
    tel: '0931-1234567',
  },
  {
    title: 'ä¿æŸ¥è¯¢',
    icon: 'card',
    url: cardUrl,
    lable:
      'å…°å·å¸‚åŸå…³åŒºé«˜æ¬£å¤§å¦å…°å·å¸‚åŸå…³åŒºé«˜æ¬£å¤§å¦å…°å·å¸‚åŸå…³åŒºé«˜æ¬£å¤§å¦å…°å·å¸‚åŸå…³åŒºé«˜æ¬£å¤§å¦å…°å·å¸‚åŸå…³åŒºé«˜æ¬£å¤§å¦å…°å·å¸‚åŸå…³åŒºé«˜æ¬£å¤§å¦',
    longitude: 103.834,
    latitude: 36.0613,
    distance: '120ç±³',
    tel: '0931-1234567',
  },
  {
    title: 'ä¿æŸ¥è¯¢',
    icon: 'card',
    url: cardUrl,
    lable:
      'å…°å·å¸‚åŸå…³åŒºé«˜æ¬£å¤§å¦å…°å·å¸‚åŸå…³åŒºé«˜æ¬£å¤§å¦å…°å·å¸‚åŸå…³åŒºé«˜æ¬£å¤§å¦å…°å·å¸‚åŸå…³åŒºé«˜æ¬£å¤§å¦å…°å·å¸‚åŸå…³åŒºé«˜æ¬£å¤§å¦å…°å·å¸‚åŸå…³åŒºé«˜æ¬£å¤§å¦',
    longitude: 103.834,
    latitude: 36.0613,
    distance: '120ç±³',
    tel: '0931-1234567',
  },
  {
    title: 'ç¤¾ä¿æŸ¥è¯¢',
    icon: 'card',
    url: cardUrl,
    lable:
      'å…°å·å¸‚åŸå…³åŒºé«˜æ¬£å¤§å¦å…°å·å¸‚åŸå…³åŒºé«˜æ¬£å¤§å¦å…°å·å¸‚åŸå…³åŒºé«˜æ¬£å¤§å¦å…°å·å¸‚åŸå…³åŒºé«˜æ¬£å¤§å¦å…°å·å¸‚åŸå…³åŒºé«˜æ¬£å¤§å¦å…°å·å¸‚åŸå…³åŒºé«˜æ¬£å¤§å¦',
    longitude: 103.834,
    latitude: 36.0613,
    distance: '120ç±³',
    tel: '0931-1234567',
  },
  {
    title: 'ç¤¾ä¿æŸ¥è¯¢',
    icon: 'card',
    url: cardUrl,
    lable:
      'å…°å·å¸‚åŸå…³åŒºé«˜æ¬£å¤§å¦å…°å·å¸‚åŸå…³åŒºé«˜æ¬£å¤§å¦å…°å·å¸‚åŸå…³åŒºé«˜æ¬£å¤§å¦å…°å·å¸‚åŸå…³åŒºé«˜æ¬£å¤§å¦å…°å·å¸‚åŸå…³åŒºé«˜æ¬£å¤§å¦å…°å·å¸‚åŸå…³åŒºé«˜æ¬£å¤§å¦',
    longitude: 103.834,
    latitude: 36.0613,
    distance: '120ç±³',
    tel: '0931-1234567',
  },
])

function gridClick(item: any) {
  console.log('ğŸ')
  if (item.title === 'ç”³è¯·') {
    routeTo({ url: '/pages-sub/serveMain/cardApplyType' })
  } else {
    routeTo({ url: '/pages-sub/serveMain/cardFromType' })
  }
}

function toPhone(e) {
  uni.makePhoneCall({
    phoneNumber: '0931-1234567',
    fail: function (e) {
      console.log('ğŸ¥', e)
    },
  })
}
function toLocation(e) {
  uni.openLocation({
    latitude: e.latitude,
    longitude: e.longitude,
    name: e.title,
    address: e.lable,
  })
}
</script>

<template>
  <wd-gap bg-color="#f5f5f5"></wd-gap>

  <view class="p-10px">
    <dy-title title="æœåŠ¡ç½‘ç‚¹" class="py-10px"></dy-title>

    <wd-cell-group border>
      <wd-cell
        v-for="(item, index) in cardInfoData"
        :key="index"
        :to="item.url"
        custom-class="cell-item"
        title-width="70%"
      >
        <template #icon>
          <view
            class="cell-icon mt-10px mr-10px p-4px bg-blue size-20px color-#fff text-center rounded-4px"
          >
            {{ item.name[0] }}
          </view>
        </template>
        <template #title>
          <view class="truncate-1 color-#000">{{ item.name }}</view>
        </template>
        <template #label>
          <view class="color-#999 truncate-3">åœ°å€: {{ '======' }}</view>
        </template>

        <view class="pt-10px">
          <view class="truncate-1 color-#999">è·ç¦» : {{ item.distance || '100 ç±³' }}</view>
          <view class="flex gap-20px justify-end mt-4px">
            <view class="flex flex-col items-center" @click="toLocation(item)">
              <view class="i-carbon-location-heart-filled color-#999"></view>
              <view class="text-center color-#999">å¯¼èˆª</view>
            </view>
            <view class="flex flex-col items-center" @click="toPhone(item)">
              <view class="i-carbon-phone-voice-filled color-#999"></view>
              <view class="text-center color-#999">ç”µè¯</view>
            </view>
          </view>
        </view>
      </wd-cell>
    </wd-cell-group>
  </view>
</template>

<style lang="scss" scoped>
:deep(.grid-item .wd-grid-item__wrapper) {
  @apply size-auto!;
}
:deep(.cell-item) {
  @apply pl-0! b-b-amber! items-center;
}
</style>
